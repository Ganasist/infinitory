// Generated by CoffeeScript 1.6.3
jQuery(function() {
  var department, jsonData, lab, myFlower;
  if (typeof gon !== "undefined" && gon !== null) {
    jsonData = {
      "name": gon.institute.name,
      "children": (function() {
        var _i, _len, _ref, _results;
        _ref = gon.institute.departments;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          department = _ref[_i];
          _results.push({
            "name": department.name,
            "children": (function() {
              var _j, _len1, _ref1, _results1;
              _ref1 = department.labs;
              _results1 = [];
              for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
                lab = _ref1[_j];
                _results1.push({
                  "name": lab.name,
                  "size": lab.users.length * 10
                });
              }
              return _results1;
            })()
          });
        }
        return _results;
      })()
    };
    myFlower = new CodeFlower("#visualization", 400, 250);
    myFlower.update(jsonData);
    return console.log(gon.institute.name);
  }
});
