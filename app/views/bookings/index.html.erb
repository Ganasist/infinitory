<% if params[:device_id] %>
  <h3>Booking sheet for <%= link_to @device.name, @device %></h3>
<% elsif params[:user_id] %>
  <h3>Bookings for <%= link_to @user.fullname, @user %></h3>
<% end %>

<table class="table table-striped">
  <thead>
    <tr>
      <% unless params[:device_id] %>
        <th>Device</th>
      <% end %>
      <th>Start time</th>
      <th>Duration</th>
      <% if params[:device_id] %>
        <th>Member</th>
      <% end %>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @bookings.each do |booking| %>
      <tr>
        <% unless params[:device_id] %>
          <td><%= link_to booking.device.fullname, booking.device %></td>
        <% end %>
        <td><%= booking.start_time.to_formatted_s(:short) %></td>
        <td><%= booking.duration %></td>
        <td><%= booking.user.fullname if params[:device_id] %></td>
        <td><%= link_to 'Show', booking %></td>
        <td><%= link_to 'Edit', edit_booking_path(booking) %></td>
        <td><%= link_to 'Destroy', booking, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if params[:device_id] %>
  <%= link_to 'New Booking', new_device_booking_path(params[:device_id]) %>
<% end %>

<hr>
<div id="calendar"></div>

