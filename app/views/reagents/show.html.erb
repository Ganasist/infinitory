<%- model_class = Reagent -%>
<div class="page-header">
  <h3><%= @reagent.name %></h3>
  <h4><%= @reagent.lab.name %> lab</h4>
</div>

<dl class="dl-horizontal">
  <div class="span4">
    <dt><strong><%= model_class.human_attribute_name(:category) %>:</strong></dt>
    <dd><%= @reagent.category.titleize %></dd>
    <dt><strong>Percent remaining:</strong></dt>
    <dd><%= @reagent.remaining %>%</dd>
    
    <% if !@reagent.users.empty? %>
      <dt><strong>Contact(s):</strong></dt>
      <% @reagent.users.each do |user| %>
      <dd><%= link_to user.fullname, user %></dd>
      <% end %>
    <% end %>

    <% if @reagent.location? %>
      <dt><strong><%= model_class.human_attribute_name(:location) %>:</strong></dt>
      <dd><%= @reagent.location %></dd>
    <% end %>

    <% if @reagent.serial? %>
      <dt><strong><%= model_class.human_attribute_name(:serial) %> #:</strong></dt>
      <dd><%= @reagent.serial %></dd>
    <% end %>

    <% if @reagent.uid? %>
      <dt>Unique ID:</dt>
      <dd><%= @reagent.uid %></dd>
    <% end %>

    <% if @reagent.lot_number? %>
      <dt>Lot number:</dt>
      <dd><%= @reagent.lot_number %></dd>
    <% end %>

    <dt><strong>Expiration:</strong></dt>
    <% if @reagent.expiration.past? %>
      <dd><span class="label label-important"><%= "#{time_ago_in_words(@reagent.expiration)}" %> ago</span></dd>
    <% elsif expiring?(@reagent) %>    
      <dd><span class="label label-warning"><%= time_ago_in_words(@reagent.expiration) %> from now</dd>
    <% else %>
      <dd><span class="label label-success"><%= time_ago_in_words(@reagent.expiration) %> from now</dd>
    <% end %>

    <% if @reagent.url? %>
      <dt>Website:</dt>
      <dd><%= link_to "#{@reagent.url}", url_with_protocol(@reagent.url), :target => "_blank" %></dd>
    <% end %>

    <% if @reagent.price? %>
      <dt><strong><%= model_class.human_attribute_name(:price) %>:</strong></dt>
      <dd><%= number_to_currency(@reagent.price) %></dd>
    <% end %>

    <% if !@reagent.tag_list.empty? %>
      <dt><strong><%= model_class.human_attribute_name(:tags) %>:</strong></dt>
      <dd><%= raw @reagent.tag_list.map { |t| link_to t, tag_path(t) }.join(', ') %></dd>
    <% end %>
  </div>

  <% if @reagent.icon.present? %>
    <br>
    <div class="span6 pull-right">
      <%= image_tag(@reagent.icon_url(:large).to_s).html_safe %><br>
    </div>
  <% end %>
</dl>
<div class="form-actions">
  <%= link_to t('.back', default: t("helpers.links.back")),
              lab_reagents_path(@lab), :class => 'btn'  %>
  <%= link_to t('.edit', default: t("helpers.links.edit")),
              edit_reagent_path(@reagent), :class => 'btn' %>
  <%= link_to t('.destroy', default: t("helpers.links.destroy")),
              reagent_path(@reagent),
              method: 'delete',
              data: { confirm: t('.confirm', default: t("helpers.links.confirm", default: 'Are you sure?')) },
              class: 'btn btn-danger' %>
</div>
