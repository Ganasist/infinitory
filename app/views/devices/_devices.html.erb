<%- model_class = Device -%>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Category</th>
      <th>Location</th>
      <% if params[:tag] %>
        <th><%= model_class.human_attribute_name(:tags) %></th>
      <% end %>
      <th>Last Update</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @devices.each do |device| %>
      <tr>
        <td>
          <%= fa_icon "paperclip", title: "Attachment" if device.pdf.present? %>
          <%= fa_icon "wrench", title: "Offline" unless device.status? %>
          <%= fa_icon "camera-retro", title: "Image" if device.icon.present? %>
          <% if device.status? %>
            <%= link_to "#{fullname(device)}", device_path(device) %>
          <% else %>
            <%= link_to "#{fullname(device)}", device_path(device), class: "text-danger" %>
          <% end %>
        </td>
        <td><%= device.category.titleize %></td>  
        <td><%= device.location %></td>
        <td><%= time_ago_in_words(device.updated_at) %> ago</td>
        <td>
          <%= link_to edit_device_path(device) do %>
            <%= fa_icon "edit", class: "fa-lg fa-fw", title: "Edit"  %>
          <% end %>

          <%= link_to device_path(device),
                      method: :delete, 
                      data: { confirm: "Are you sure you want to delete this?" } do %>
            <%= fa_icon "trash-o", class: "fa-lg fa-fw", title: "Delete"  %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>